!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Schema=e()}}(function(){return function e(t,r,n){function a(i,u){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[i]={exports:{}};t[i][0].call(f.exports,function(e){var r=t[i][1][e];return a(r?r:e)},f,f.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils"),a=[],o=function(e,t){a[e]=t},i=function(e){return a[e]},u=function(e,t){return(0,n.getElementPath)(e)+e.children.length},c=function(e,t){var r=Object.create(e);if(e.data){r.data=JSON.parse(JSON.stringify(e.data));for(var n in t)r.data[n]=t[n]}return r},l=function(e){return"object"==typeof e};r.isComponent=l;var f=function(e,t){var r=u(e.parent),a=i(r);if(a)return a;var l=t[0],f=t[1],d=(0,n.getContent)(t),s=c(l,f);return s.content=d,o(r,s),s};r.buildComponent=f},{"./utils":9}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(e("./exr"),e("./utils")),a=e("./component"),o=e("./element"),i=e("./renderer"),u=function(e,t,r){var a=(0,n.getTag)(r),u=(0,n.getContent)(r);t.el=(0,o.newDomElement)(t.parent,a),t.el.innerHTML=(0,n.validateContent)(u),t.parent=t.el,(0,i.traverse)(e,t,r),t.parent=t.parent.parentNode},c=function(e,t,r){var c=(0,n.getTag)(r);if((0,a.isComponent)(c)){var l=(0,o.newDomElement)(t.parent,"div"),f=(0,a.buildComponent)(t,r,e.key);(0,i.render)(f,l);for(var d=1;d<r.length;d++)(0,n.applySelector)(l,r[d])}else u(e,t,r)};r.renderElementArray=c},{"./component":1,"./element":4,"./exr":6,"./renderer":7,"./utils":9}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils"),a=e("./exr"),o=e("./core"),i=[{regex:(0,a.GET)("ATTR"),method:function(e,t,r){var a=(0,n.getAttribute)(e,r);t.el.setAttribute(a.attr,a.value)}},{regex:(0,a.GET)("DATA"),method:function(e,t,r){var a=(0,n.getDataFromVar)(e,r);(0,n.applySelector)(t.el,a)||(t.el.innerHTML=a)}},{regex:(0,a.GET)("EVENT"),method:function(e,t,r){var n=r.replace("!","").replace(/\s/,"").split(":");t.el[n[0]]=function(t){e[n[1]](e,t)}}},{regex:(0,a.GET)("IF"),method:function(e,t,r){var n=r.replace(/^\?\s+/,"");if((0,a.CHECK)(n,"DATA")){var o=e.data[(0,a.REPLACE)(n,"DATA","")];o||(t.el.style.display="none")}}},{regex:(0,a.GET)("FOR"),method:function(e,t,r,i){var u=r.replace((0,a.GET)("FOR"),"").split(/\s+\in\s+/),c=e.data[u[1].replace((0,a.GET)("DATA"),"")],l=u[0].replace((0,a.GET)("DATA"),"");for(var f in c)e.data[l]=c[f],(0,o.renderElementArray)(e,t,(0,n.getContent)(i));return!0}}],u=function(e,t,r,n){var a=!1;return i.forEach(function(o){if(e.match(o.regex)){var i=o.method(r,t,e,n);i&&(a=!0)}}),a};r.driveDirectives=u},{"./core":2,"./exr":6,"./utils":9}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./exr"),a=e("./utils"),o=function(e,t){var r=t||"span";if((0,n.CHECK)(r,"ID")||(0,n.CHECK)(r,"CLAS")){var o=document.createElement("div");(0,a.applySelector)(o,r)}else var o=document.createElement(r);return e.appendChild(o),o};r.newDomElement=o},{"./exr":6,"./utils":9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./renderer"),a=document.createElement("div");a.id="--rendered-styles",document.body.appendChild(a);var o={};o.engine=n.render,r["default"]=o,t.exports=r["default"]},{"./renderer":7}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ATTR:/^[a-z,A-Z,-]+\:\s/,ID:/^\#/,CLAS:/(^|\s+)\./g,DATA:/^\$/,EVENT:/^\!/,TRANS:/^\>/,IF:/^\?\s+/,FOR:/^\%\s+/,WRAP:/^\[[a-z,A-Z,0-9,-]+\]/},a=function(e,t){return e.match(n[t])};r.CHECK=a;var o=function(e,t,r){return e.replace(n[t],r)};r.REPLACE=o;var i=function(e){return n[e]};r.GET=i},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./directives"),a=e("./styles"),o=e("./core"),i=e("./utils"),u=e("./exr"),c=function f(e,t){t.innerHTML="",e.root=t,e.key||(e.key=(0,i.generateKey)(8)),e.root.className=e.key;var r={parent:t,el:null};e.setData=function(t){for(var r in t)e.data[r]=t[r];f(e,e.root)},e.setStyles=function(t){(0,a.renderCSS)(t,e)},l(e,r,[e.template]),e.styles&&(0,a.renderCSS)(e.styles,e),e.init&&!e.rendered&&(e.rendered=!0,e.init(e))};r.render=c;var l=function(e,t,r){for(var a=0;a<r.length;a++){var c=r[a];if("string"==typeof c){if((0,i.applySelector)(t.el,c))continue;var l=(0,n.driveDirectives)(c,t,e,r);l&&(a=r.length-1),(0,u.CHECK)(c,"TRANS")&&(c=e.content)}Array.isArray(c)&&(0,o.renderElementArray)(e,t,c)}};r.traverse=l},{"./core":2,"./directives":3,"./exr":6,"./styles":8,"./utils":9}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={},a=[],o=function(e,t){n[e]||(n[e]=[]),n[e].push(t)},i=function(e){n[e].forEach(function(e){e()})},u={"!":function(e,t,r){var n=e[0].replace("!",""),a=c(e,t),o=r.root.querySelectorAll(t)[0],u=e[1].match(/^\@/);return u?o[n]=function(){i(e[1])}:o[n]=function(){r.setStyles([a])},""},"@":function(e,t,r){var n=(e[0].replace(/^\@/,""),c(e,t));return o(e[0],function(){r.setStyles([n])}),""},">":function(e,t){return e[0]=t+e[0].replace(">",""),a.push(e),""},DEFAULT:function(e,t,r){return f([e],r)}},c=function(e,t){var r=e.slice();return r[0]=t,r},l=function(e){return e.match(/^\*$/)},f=function v(e,t,r){var n="";return e.map(function(e){var a=e[0];r||(n+="."+t.key+" "+a+"{"),e.map(function(e,r){if(0!=r){var o=e[0][0];return Array.isArray(e)?void(l(o)?n+=v([e],t,!0):(u[o]||u.DEFAULT)(e,a,t)):void(n+=e.replace(/\s+/,":")+";")}}),r||(n+="}")}),n},d=function(e,t){var r="";r+=f(e,t),a.length>0&&(r+=f(a,t),a=[]),s(r,t)};r.renderCSS=d;var s=function(e,t){var r="rs-"+t.key+e.length,n=document.getElementById(r);if(!n){var a=document.getElementById("--rendered-styles");n=document.createElement("style"),n.id=r,a.appendChild(n)}n.innerHTML=e}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./exr.js"),a=function(e){for(var t="",r="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM",n=0;e>n;n++)t+=r[Math.floor(Math.random()*(r.length-1)+1)];return t};r.generateKey=a;var o=function(e,t){var r=t.match(/^[a-z,A-Z,-]+/)[0],a=(0,n.REPLACE)(t,"ATTR","");return(0,n.CHECK)(a,"DATA")&&(a=c(e,a)),{value:a,attr:r}};r.getAttribute=o;var i=function(e,t){if("string"!=typeof t)return!1;if((0,n.CHECK)(t,"ID"))e.id=(0,n.REPLACE)(t,"ID","");else{if(!(0,n.CHECK)(t,"CLAS"))return!1;e.className=(0,n.REPLACE)(t,"CLAS"," ")}return!0};r.applySelector=i;var u=function(e){for(var t=e.nodeName,r=e,n=e.parentNode;n;){for(var a in n.children)n.children[a]==r&&(t=n.nodeName+"["+a+"]/"+t);r=n,n=n.parentNode}return t};r.getElementPath=u;var c=function(e,t){var r=(0,n.REPLACE)(t,"DATA",""),a=null;if(r.match(/\./)){var o=r.split(/\./);a=e.data[o[0]][o[1]]}else a=e.data[r];return a};r.getDataFromVar=c;var l=function(e){return e[0]};r.getTag=l;var f=function(e){return e[e.length-1]};r.getContent=f;var d=function(e){return"string"!=typeof e||(0,n.CHECK)(e,"TRANS")?"":e};r.validateContent=d},{"./exr.js":6}]},{},[5])(5)});