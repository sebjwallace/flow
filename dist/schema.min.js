!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Schema=e()}}(function(){return function e(t,r,n){function o(i,u){if(!r[i]){if(!t[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[i]={exports:{}};t[i][0].call(f.exports,function(e){var r=t[i][1][e];return o(r?r:e)},f,f.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils"),o=[],a=function(){o=[]};r.clean=a;var i=function(e,t){o[e]=t},u=function(e){return o[e]},l=function(e,t){return(0,n.getElementPath)(e)+e.children.length},c=function(e,t){var r=void 0;r=Array.isArray(t)?[]:{};for(var o in t)r[o]=(0,n.getDataFromVar)(e,t[o]);return r},f=function(e,t){var r=Object.create(e);if(e.data){r.data=JSON.parse(JSON.stringify(e.data));for(var n in t)r.data[n]=t[n]}return r},d=function(e){return"object"==typeof e};r.isComponent=d;var s=function(e,t,r){var o=l(e.parent),a=u(o);if(a)return a;var d=t[0],s=c(r,t[1]),v=(0,n.getContent)(t),p=f(d,s);return p.content=v,i(o,p),p};r.buildComponent=s},{"./utils":10}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(e("./exr"),e("./utils")),o=e("./component"),a=e("./element"),i=e("./renderer"),u=function(e,t,r){var o=(0,n.getTag)(r),u=(0,n.getContent)(r,e);t.el=(0,a.newDomElement)(t.parent,o),t.el.innerHTML=(0,n.validateContent)(u),t.parent=t.el,(0,i.traverse)(e,t,r),t.parent=t.parent.parentNode},l=function(e,t,r){var l=(0,n.getTag)(r);if((0,o.isComponent)(l)){var c=(0,a.newDomElement)(t.parent,"div"),f=(0,o.buildComponent)(t,r,e);(0,i.render)(f,c);for(var d=1;d<r.length;d++)(0,n.applySelector)(c,r[d])}else u(e,t,r)};r.renderElementArray=l},{"./component":1,"./element":4,"./exr":6,"./renderer":8,"./utils":10}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils"),o=e("./exr"),a=e("./core"),i=[{regex:(0,o.GET)("ATTR"),method:function(e,t,r){var o=(0,n.getAttribute)(e,r);t.el.setAttribute(o.attr,o.value)}},{regex:(0,o.GET)("DATA"),method:function(e,t,r){var o=(0,n.getDataFromVar)(e,r);(0,n.applySelector)(t.el,o)||(t.el.innerHTML=o)}},{regex:(0,o.GET)("EVENT"),method:function(e,t,r){var o=r.replace("!","").replace(/\s/,"").split(":"),a=o[0],i=o[1],u=i.match(/\([\$a-z,A-Z.]+\)/);if(i=i.replace(/\([\$a-z,A-Z.]+\)/,""),u){u=u[0].replace(/\(|\)/g,"").split(",");for(var l in u)u[l]=(0,n.getDataFromVar)(e,u[l])}t.el[a]=function(t){var r=[e,t];r=r.concat(u),e[i].apply(void 0,r)}}},{regex:/^[a-z,A-Z]+\(\)/,method:function(e,t,r){t.el[r.replace(/\(\)/,"")]()}},{regex:(0,o.GET)("IF"),method:function(e,t,r){var n=r.replace(/^\?\s+/,"");if((0,o.CHECK)(n,"DATA")){var a=e.data[(0,o.REPLACE)(n,"DATA","")];a||(t.el.style.display="none")}}},{regex:(0,o.GET)("FOR"),method:function(e,t,r,i){var u=r.replace((0,o.GET)("FOR"),"").split(/\s+\in\s+/),l=e.data[u[1].replace((0,o.GET)("DATA"),"")],c=u[0].replace((0,o.GET)("DATA"),"");for(var f in l)e.data[c]=l[f],e.data.$=f,(0,a.renderElementArray)(e,t,(0,n.getContent)(i));return!0}}],u=function(e,t,r,n){var o=!1;return i.forEach(function(a){if(e.match(a.regex)){var i=a.method(r,t,e,n);i&&(o=!0)}}),o};r.driveDirectives=u},{"./core":2,"./exr":6,"./utils":10}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./exr"),o=e("./utils"),a=function(e,t){var r=t||"span";if((0,n.CHECK)(r,"ID")||(0,n.CHECK)(r,"CLAS")){var a=document.createElement("div");(0,o.applySelector)(a,r)}else var a=document.createElement(r);return e.appendChild(a),a};r.newDomElement=a},{"./exr":6,"./utils":10}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./renderer"),o=e("./component"),a=e("./model"),i=document.createElement("div");i.id="--rendered-styles",document.body.appendChild(i);var u={};u.engine=n.render,u.clean=o.clean,u.model=a.model,r["default"]=u,t.exports=r["default"]},{"./component":1,"./model":7,"./renderer":8}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ATTR:/^[a-z,A-Z,-]+\:\s/,ID:/^\#/,CLAS:/(^|\s+)\./g,DATA:/^\$/,EVENT:/^\!/,TRANS:/^\>/,IF:/^\?\s+/,FOR:/^\%\s+/,WRAP:/^\[[a-z,A-Z,0-9,-]+\]/},o=function(e,t){return e.match(n[t])};r.CHECK=o;var a=function(e,t,r){return e.replace(n[t],r)};r.REPLACE=a;var i=function(e){return n[e]};r.GET=i},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./renderer"),o=[],a=[],i=function(e){var t=void 0;for(t in e)break;o[t]=e};r.model=i;var u=function(e,t){o[e].__listeners||(o[e].__listeners={}),o[e].__listeners[t.id]=t,t.data[e]=o[e][e],console.log(o)};r.attachModel=u;var l=function(e,t,r){var i=o[e],u=i[t](i,r);i[e]=u,a.push(u);var l=i.__listeners;for(var c in l){var f=l[c];f.data[e]=u,(0,n.render)(f,f.root)}console.log(o)};r.updateModel=l},{"./renderer":8}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./directives"),o=e("./styles"),a=e("./core"),i=e("./utils"),u=e("./exr"),l=e("./model"),c=function d(e,t){t.innerHTML="",e.root=t,e.key||(e.key=(0,i.generateKey)(8)),e.root.className=e.key;var r={parent:t,el:null};e.setData=function(t){for(var r in t)e.data[r]=t[r];d(e,e.root)},e.setStyles=function(t){(0,o.renderCSS)(t,e)},e.attachModel=function(t){(0,l.attachModel)(t,e)},e.updateModel=l.updateModel,e.boot&&!e.rendered&&e.boot(e),"function"==typeof e.template?f(e,r,[e.template(e)]):f(e,r,[e.template]),e.styles&&(0,o.renderCSS)(e.styles,e),e.init&&!e.rendered&&(e.rendered=!0,e.init(e))};r.render=c;var f=function(e,t,r){for(var o=0;o<r.length;o++){var l=r[o];if("function"==typeof l&&(l=l(e)),"string"==typeof l){if((0,i.applySelector)(t.el,l))continue;var c=(0,n.driveDirectives)(l,t,e,r);c&&(o=r.length-1),(0,u.CHECK)(l,"TRANS")&&(l=e.content)}Array.isArray(l)&&(0,a.renderElementArray)(e,t,l)}};r.traverse=f},{"./core":2,"./directives":3,"./exr":6,"./model":7,"./styles":9,"./utils":10}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={},o=[],a=function(e,t){n[e]||(n[e]=[]),n[e].push(t)},i=function(e){n[e].forEach(function(e){e()})},u={"!":function(e,t,r){var n=e[0].replace("!",""),o=l(e,t),a=r.root.querySelectorAll(t)[0],u=e[1].match(/^\@/);return u?a[n]=function(){i(e[1])}:a[n]=function(){r.setStyles([o])},""},"@":function(e,t,r){var n=(e[0].replace(/^\@/,""),l(e,t));return a(e[0],function(){r.setStyles([n])}),""},">":function(e,t){return e[0]=t+e[0].replace(">",""),o.push(e),""},DEFAULT:function(e,t,r){return f([e],r)}},l=function(e,t){var r=e.slice();return r[0]=t,r},c=function(e){return e.match(/^\*$/)},f=function v(e,t,r){var n="";return e.map(function(e){var o=e[0];r||(n+="."+t.key+" "+o+"{"),e.map(function(e,r){if(0!=r){var a=e[0][0];return Array.isArray(e)?void(c(a)?n+=v([e],t,!0):(u[a]||u.DEFAULT)(e,o,t)):void(n+=e.replace(/\s+/,":")+";")}}),r||(n+="}")}),n},d=function(e,t){var r="";r+=f(e,t),o.length>0&&(r+=f(o,t),o=[]),s(r,t)};r.renderCSS=d;var s=function(e,t){var r="rs-"+t.key+e.length,n=document.getElementById(r);if(!n){var o=document.getElementById("--rendered-styles");n=document.createElement("style"),n.id=r,o.appendChild(n)}n.innerHTML=e}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./exr.js"),o=function(e){for(var t="",r="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM",n=0;e>n;n++)t+=r[Math.floor(Math.random()*(r.length-1)+1)];return t};r.generateKey=o;var a=function(e,t){var r=t.match(/^[a-z,A-Z,-]+/)[0],o=(0,n.REPLACE)(t,"ATTR","");return(0,n.CHECK)(o,"DATA")&&(o=l(e,o)),{value:o,attr:r}};r.getAttribute=a;var i=function(e,t){if("string"!=typeof t)return!1;if((0,n.CHECK)(t,"ID"))e.id=(0,n.REPLACE)(t,"ID","");else{if(!(0,n.CHECK)(t,"CLAS"))return!1;e.className=(0,n.REPLACE)(t,"CLAS"," ")}return!0};r.applySelector=i;var u=function(e){for(var t=e.nodeName,r=e,n=e.parentNode;n;){for(var o in n.children)n.children[o]==r&&(t=n.nodeName+"["+o+"]/"+t);r=n,n=n.parentNode}return t};r.getElementPath=u;var l=function(e,t){if("string"!=typeof t)return t;var r=(0,n.REPLACE)(t,"DATA","");if(r==t)return t;var o=null;if(r.match(/\./)){var a=r.split(/\./);o=e.data[a[0]][a[1]]}else o=e.data[r];return o};r.getDataFromVar=l;var c=function(e){return e[0]};r.getTag=c;var f=function(e,t){var r=e[e.length-1];return"function"==typeof r?r(t):r};r.getContent=f;var d=function(e){return"string"!=typeof e||(0,n.CHECK)(e,"TRANS")?"":e};r.validateContent=d},{"./exr.js":6}]},{},[5])(5)});